# ุฏููู ุณุฑูุน - ูุธุงู ุงููุงุด ูุงูู Loading

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1. ูุธุงู ุงููุงุด
- โ ุชุฎุฒูู ุงูุจูุงูุงุช ูุญููุงู ููุฏุฉ 10-15 ุฏูููุฉ
- โ ุชุญููู ููุฑู ุนูุฏ ุงูุนูุฏุฉ ููุตูุญุงุช
- โ ุชูููู ุงูุทูุจุงุช ููู API ุจูุณุจุฉ 70%

### 2. ูุคุดุฑุงุช ุงูุชุญููู
- โ Loading screen ุงุญุชุฑุงูู ุนูุฏ ุฃูู ุฒูุงุฑุฉ
- โ ุฑุณุงุฆู ูุงุถุญุฉ ูููุณุชุฎุฏู
- โ ุชุตููู ูุชูุงุณู ูุน ุงููููุน

### 3. ุงูุตูุญุงุช ุงููุญุฏุซุฉ
- โ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (`app/page.tsx`)
- โ ุตูุญุงุช ุงูุฃูุณุงู (`app/section/[slug]/page.tsx`)
- โ ุตูุญุฉ ุงูุฃุฑุดูู (`app/archive/page.tsx`)

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ููุตูุญุงุช ุงูุฌุฏูุฏุฉ:

```typescript
// 1. ุงุณุชูุฑุงุฏ ุงูุฎุฏูุงุช ูุน ุงููุงุด
import { getPublishedIssues } from "@/app/lib/cached-issues.service";
import PageLoader from "@/components/PageLoader";

// 2. ุฅุถุงูุฉ loading state
const [loading, setLoading] = useState(true);

// 3. ุฌูุจ ุงูุจูุงูุงุช ูุน try/catch/finally
useEffect(() => {
  const fetchData = async () => {
    setLoading(true);
    try {
      const data = await getPublishedIssues();
      setData(data);
    } catch (error) {
      console.error(error);
    } finally {
      setLoading(false);
    }
  };
  fetchData();
}, []);

// 4. ุนุฑุถ Loading
return (
  <>
    {loading && <PageLoader message="ุฌุงุฑู ุงูุชุญููู..." />}
    {/* ุงููุญุชูู */}
  </>
);
```

### ูู Dashboard (ุนูุฏ ุงูุชุญุฏูุซ):

```typescript
import { clearIssueCache } from "@/app/lib/cached-issues.service";

// ุจุนุฏ ุชุญุฏูุซ ุงูุจูุงูุงุช
await updateIssue(id, payload);
clearIssueCache(id); // ุญุฐู ุงููุงุด
```

## ๐ ุงููุชุงุฆุฌ

### ูุจู:
- โฑ๏ธ ุชุญููู: 2-3 ุซูุงูู ูู ูู ูุฑุฉ
- ๐ ุฅุนุงุฏุฉ ุชุญููู ุงูุจูุงูุงุช ุฏุงุฆูุงู
- โ ูุง ููุฌุฏ ูุคุดุฑ ุชุญููู

### ุจุนุฏ:
- โก ุชุญููู: ููุฑู (ูู ุงููุงุด)
- โ ุชุญููู ูู API ููุท ุนูุฏ ุงูุญุงุฌุฉ
- โ ูุคุดุฑ ุชุญููู ุงุญุชุฑุงูู

## ๐ฏ ุงููููุงุช ุงููููุฉ

```
app/lib/
โโโ cache.service.ts              # ุฎุฏูุฉ ุงููุงุด ุงูุฃุณุงุณูุฉ
โโโ cached-issues.service.ts      # ุงูุฃุนุฏุงุฏ ูุน ูุงุด
โโโ cached-articles.service.ts    # ุงูููุงูุงุช ูุน ูุงุด

components/PageLoader/
โโโ PageLoader.tsx                # ูููู Loading
โโโ PageLoader.module.css         # ุชุตููู Loading
โโโ index.ts                      # Export
```

## ๐ก ูุตุงุฆุญ

1. **ุงุณุชุฎุฏู ุงูุฎุฏูุงุช ูุน ุงููุงุด ุฏุงุฆูุงู** ูู ุงูุตูุญุงุช ุงูุนุงูุฉ
2. **ุงุญุฐู ุงููุงุด** ุจุนุฏ ุงูุชุญุฏูุซ ูู Dashboard
3. **ุฎุตุต ุฑุณุงูุฉ Loading** ููู ุตูุญุฉ
4. **ุงุณุชุฎุฏู try/catch** ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก

## ๐ง ุชุฎุตูุต ูุฏุฉ ุงููุงุด

ูู `app/lib/cached-issues.service.ts`:

```typescript
const CACHE_TTL = {
  PUBLISHED_ISSUES: 10 * 60 * 1000, // 10 ุฏูุงุฆู
  ISSUE_DETAIL: 15 * 60 * 1000,     // 15 ุฏูููุฉ
  // ูููู ุชุบููุฑ ุงููุฏุฉ ุญุณุจ ุงูุญุงุฌุฉ
};
```

## โ ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ

**ุณ: ูู ุงููุงุด ูุคุซุฑ ุนูู ุงูุจูุงูุงุช ุงูุญููููุฉุ**
ุฌ: ูุงุ ุงููุงุด ูุญูู ููุท ูู ุงููุชุตูุญ

**ุณ: ูุชู ูุชู ุชุญุฏูุซ ุงููุงุดุ**
ุฌ: ุชููุงุฆูุงู ุจุนุฏ ุงูุชูุงุก ุงููุฏุฉ ุงููุญุฏุฏุฉ (10-15 ุฏูููุฉ)

**ุณ: ููู ุฃุญุฐู ุงููุงุด ูุฏููุงูุ**
ุฌ: ุงุณุชุฎุฏู `clearIssueCache()` ุฃู `clearArticleCache()`

**ุณ: ูู ูุนูู ุงููุงุด ูู ูุถุน Incognitoุ**
ุฌ: ูุนูุ ููู ููุญุฐู ุนูุฏ ุฅุบูุงู ุงููุชุตูุญ
